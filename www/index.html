<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>webgl!</title>
    <link rel="stylesheet" href="./main.css">
  </head>
  <body>
    <noscript>this page contains webassembly and javascript content, please enable javascript in your browser.</noscript>

    <canvas id="c"></canvas>
    <div id="container">
      <div id="controls"></div>
      <div id="colors"></div>
    <script id="v-shader" type="notjs">
      attribute vec4 a_position;
      attribute vec3 a_normal;

      uniform mat4 u_worldview;

      varying float v_height;
      varying vec3 v_normal;

      void main() {
        vec4 clip_position = u_worldview * a_position;
        v_height = a_position.z;

        v_normal = a_normal;

        gl_Position = clip_position;
      }
    </script>
    <script id="f-shader" type="notjs">
      precision mediump float;

      uniform vec3 u_reverseLightDirection;

      varying float v_height;
      varying vec3 v_normal;

      void main() {
        float h = v_height;

        vec3 normal = normalize(v_normal);
        float light = dot(normal, u_reverseLightDirection);

        if (v_height < 40.0) {
          gl_FragColor = vec4(0.0/255.0,79.0/255.0,163.0/255.0, 1);
        } else if (v_height < 60.0) {
          gl_FragColor = vec4(66.0/255.0,135.0/255.0,245.0/255.0, 1);
        } else if (v_height < 90.0) {
          gl_FragColor = vec4(34.0/255.0,201.0/255.0,101.0/255.0, 1);
        } else if (v_height < 130.0) {
          gl_FragColor = vec4(105.0/255.0,55.0/255.0,6.0/255.0, 1);
        } else if (v_height < 180.0) {
          gl_FragColor = vec4(74.0/255.0,37.0/255.0,1.0/255.0, 1);
        } else {
          gl_FragColor = vec4(1, 1, 1, 1);
        }

        gl_FragColor.rgb *= pow(light, 1.5);
      }
    </script>
    <script src="./bootstrap.js"></script>
  </body>
</html>
